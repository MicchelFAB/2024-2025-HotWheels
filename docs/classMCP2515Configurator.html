<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cluster: MCP2515Configurator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cluster<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMCP2515Configurator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MCP2515Configurator Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7a34a61617c7a684b68dfbf848591c70" id="r_a7a34a61617c7a684b68dfbf848591c70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a34a61617c7a684b68dfbf848591c70">MCP2515Configurator</a> (<a class="el" href="classSPIController.html">SPIController</a> &amp;spiController)</td></tr>
<tr class="separator:a7a34a61617c7a684b68dfbf848591c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598f082ddb6096553ba2d1657953ebe6" id="r_a598f082ddb6096553ba2d1657953ebe6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a598f082ddb6096553ba2d1657953ebe6">resetChip</a> ()</td></tr>
<tr class="separator:a598f082ddb6096553ba2d1657953ebe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726cd02381fff63eab7bfd289067d6cf" id="r_a726cd02381fff63eab7bfd289067d6cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a726cd02381fff63eab7bfd289067d6cf">configureBaudRate</a> ()</td></tr>
<tr class="separator:a726cd02381fff63eab7bfd289067d6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3688800297022aee833d54ca88d9d99" id="r_af3688800297022aee833d54ca88d9d99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3688800297022aee833d54ca88d9d99">configureTXBuffer</a> ()</td></tr>
<tr class="separator:af3688800297022aee833d54ca88d9d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3756a8b45bb55a349c37e76fe133b45f" id="r_a3756a8b45bb55a349c37e76fe133b45f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3756a8b45bb55a349c37e76fe133b45f">configureRXBuffer</a> ()</td></tr>
<tr class="separator:a3756a8b45bb55a349c37e76fe133b45f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5252bc8370e99e5ab0d9a12f7e92a54" id="r_ae5252bc8370e99e5ab0d9a12f7e92a54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5252bc8370e99e5ab0d9a12f7e92a54">configureFiltersAndMasks</a> ()</td></tr>
<tr class="separator:ae5252bc8370e99e5ab0d9a12f7e92a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992d30e78baa17aa952d17643b599d5d" id="r_a992d30e78baa17aa952d17643b599d5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a992d30e78baa17aa952d17643b599d5d">configureInterrupts</a> ()</td></tr>
<tr class="separator:a992d30e78baa17aa952d17643b599d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522a619dc1668ac677ca9f422f8f302a" id="r_a522a619dc1668ac677ca9f422f8f302a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a522a619dc1668ac677ca9f422f8f302a">setMode</a> (uint8_t mode)</td></tr>
<tr class="separator:a522a619dc1668ac677ca9f422f8f302a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e133b539872c674a29cd81db4185d6c" id="r_a0e133b539872c674a29cd81db4185d6c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e133b539872c674a29cd81db4185d6c">verifyMode</a> (uint8_t expectedMode)</td></tr>
<tr class="separator:a0e133b539872c674a29cd81db4185d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14424f50fc8e6367c586f26f8dedbfb" id="r_ab14424f50fc8e6367c586f26f8dedbfb"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab14424f50fc8e6367c586f26f8dedbfb">readCANMessage</a> (uint16_t &amp;frameID)</td></tr>
<tr class="separator:ab14424f50fc8e6367c586f26f8dedbfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7a34a61617c7a684b68dfbf848591c70" name="a7a34a61617c7a684b68dfbf848591c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a34a61617c7a684b68dfbf848591c70">&#9670;&#160;</a></span>MCP2515Configurator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MCP2515Configurator::MCP2515Configurator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSPIController.html">SPIController</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>spiController</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs an <a class="el" href="classMCP2515Configurator.html">MCP2515Configurator</a> object and initializes it with the provided SPI controller.</p>
<p>This constructor takes an <a class="el" href="classSPIController.html">SPIController</a> reference and associates it with the <a class="el" href="classMCP2515Configurator.html">MCP2515Configurator</a>, enabling the configurator to interact with the SPI hardware for configuring the MCP2515 controller. The <a class="el" href="classSPIController.html">SPIController</a> is passed by reference, ensuring that the same controller is used throughout the configuratorâ€™s lifetime.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spiController</td><td>A reference to the <a class="el" href="classSPIController.html">SPIController</a> object that will be used for communication with the MCP2515 controller. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a726cd02381fff63eab7bfd289067d6cf" name="a726cd02381fff63eab7bfd289067d6cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726cd02381fff63eab7bfd289067d6cf">&#9670;&#160;</a></span>configureBaudRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::configureBaudRate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the baud rate settings for the MCP2515 chip.</p>
<p>This function sets the appropriate values for the baud rate prescaler and phase segments in the MCP2515 configuration registers (CNF1, CNF2, CNF3). These settings define the baud rate and timing characteristics for CAN communication. The values written to the registers are specific to a desired baud rate configuration. </p>

</div>
</div>
<a id="ae5252bc8370e99e5ab0d9a12f7e92a54" name="ae5252bc8370e99e5ab0d9a12f7e92a54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5252bc8370e99e5ab0d9a12f7e92a54">&#9670;&#160;</a></span>configureFiltersAndMasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::configureFiltersAndMasks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the filters and masks for the MCP2515 chip.</p>
<p>This function sets the values for the first filter and mask registers to allow the MCP2515 to filter incoming CAN messages based on specific criteria. The filter and mask settings determine which messages are passed to the RX buffer for processing.</p>
<ul>
<li>Filter 0: The filter register is set to 0xFF, configuring the chip to accept specific messages based on the filter settings.</li>
<li>Mask 0: The mask register is set to 0xFF, defining the acceptance criteria for the messages. </li>
</ul>

</div>
</div>
<a id="a992d30e78baa17aa952d17643b599d5d" name="a992d30e78baa17aa952d17643b599d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a992d30e78baa17aa952d17643b599d5d">&#9670;&#160;</a></span>configureInterrupts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::configureInterrupts </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the interrupt settings for the MCP2515 chip.</p>
<p>This function enables the receive interrupt by setting the appropriate bit in the CANINTE register. With this configuration, the MCP2515 will generate an interrupt whenever a message is received, allowing the system to handle incoming messages efficiently.</p>
<ul>
<li>CANINTE: Interrupt Enable Register, where the receive interrupt bit is set to enable interrupts for received messages. </li>
</ul>

</div>
</div>
<a id="a3756a8b45bb55a349c37e76fe133b45f" name="a3756a8b45bb55a349c37e76fe133b45f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3756a8b45bb55a349c37e76fe133b45f">&#9670;&#160;</a></span>configureRXBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::configureRXBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the receive (RX) buffer of the MCP2515 chip.</p>
<p>This function sets the RX buffer control register (RXB0CTRL) to enable rollover and configures the buffer to receive all CAN messages. By setting these bits, the MCP2515 will continuously store received messages, allowing for easier message processing.</p>
<ul>
<li>RXB0CTRL: Receive Buffer Control Register, which is configured to enable rollover and set the RX mode to receive all messages. </li>
</ul>

</div>
</div>
<a id="af3688800297022aee833d54ca88d9d99" name="af3688800297022aee833d54ca88d9d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3688800297022aee833d54ca88d9d99">&#9670;&#160;</a></span>configureTXBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::configureTXBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the transmit (TX) buffer of the MCP2515 chip.</p>
<p>This function clears the control register for the TX buffer (TXB0CTRL), effectively resetting the buffer's configuration to its default state. This step is part of setting up the MCP2515 for CAN message transmission.</p>
<ul>
<li>TXB0CTRL: Transmit Buffer Control Register, which is cleared to ensure the TX buffer is properly initialized before use. </li>
</ul>

</div>
</div>
<a id="ab14424f50fc8e6367c586f26f8dedbfb" name="ab14424f50fc8e6367c586f26f8dedbfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14424f50fc8e6367c586f26f8dedbfb">&#9670;&#160;</a></span>readCANMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint8_t &gt; MCP2515Configurator::readCANMessage </td>
          <td>(</td>
          <td class="paramtype">uint16_t &amp;</td>          <td class="paramname"><span class="paramname"><em>frameID</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a CAN message from the MCP2515 chip.</p>
<p>This function checks if a CAN message is available in the RX buffer. If data is available, it reads the frame ID and the message length, followed by the message data itself. The received data is stored in a vector and returned. After reading the message, the interrupt flag is cleared to allow further message processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frameID</td><td>A reference to a variable where the frame ID of the received message will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector containing the received CAN message data. </dd></dl>

</div>
</div>
<a id="a598f082ddb6096553ba2d1657953ebe6" name="a598f082ddb6096553ba2d1657953ebe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598f082ddb6096553ba2d1657953ebe6">&#9670;&#160;</a></span>resetChip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MCP2515Configurator::resetChip </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets the MCP2515 chip and verifies that it has entered configuration mode.</p>
<p>This function sends a reset command to the MCP2515 chip, then waits for a brief period to allow the reset process to complete. Afterward, it reads the chip's status register to ensure that the chip has entered the configuration mode, which is indicated by a specific value in the status register.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the chip has been successfully reset and is in configuration mode, false otherwise. </dd></dl>

</div>
</div>
<a id="a522a619dc1668ac677ca9f422f8f302a" name="a522a619dc1668ac677ca9f422f8f302a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a522a619dc1668ac677ca9f422f8f302a">&#9670;&#160;</a></span>setMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCP2515Configurator::setMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the operation mode of the MCP2515 chip.</p>
<p>This function writes the specified mode to the CANCTRL register, configuring the MCP2515 to operate in the desired mode. The mode can be used to select different operation modes such as Normal, Sleep, or Configuration mode, based on the value provided.</p>
<ul>
<li>CANCTRL: Control Register, where the mode is written to configure the chip's operation. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The mode to set for the MCP2515, passed as a byte value corresponding to the desired operation mode. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a id="a0e133b539872c674a29cd81db4185d6c" name="a0e133b539872c674a29cd81db4185d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e133b539872c674a29cd81db4185d6c">&#9670;&#160;</a></span>verifyMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MCP2515Configurator::verifyMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>expectedMode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Verifies if the MCP2515 is operating in the expected mode.</p>
<p>This function reads the CANSTAT register and checks the mode bits to ensure that the MCP2515 is in the expected operation mode. The mode is verified by comparing the current mode with the provided expected mode.</p>
<ul>
<li>CANSTAT: Status Register, where the current operation mode is read.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">expectedMode</td><td>The expected mode value to compare against the current mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the current mode matches the expected mode, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>app/includes/canbus/<a class="el" href="MCP2515Configurator_8hpp_source.html">MCP2515Configurator.hpp</a></li>
<li>app/sources/canbus/<b>MCP2515Configurator.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.1
</small></address>
</div><!-- doc-content -->
</body>
</html>
